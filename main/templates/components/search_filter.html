<!-- Live Search Bar -->
<div class="mb-6 animate-fade-in">
  <div class="bg-white rounded-xl p-4 relative" style="border: 2px solid #BDCDD6; box-shadow: 0 4px 12px rgba(96, 150, 180, 0.15);">
    <input 
      type="text" 
      id="liveSearch"
      placeholder="üîç Search products by name, brand, or category..." 
      class="search-box w-full px-6 py-4 rounded-lg font-medium transition-all focus:outline-none"
      style="border: 2px solid #93BFCF; padding-left: 3.5rem;"
      onfocus="this.style.borderColor='#6096B4'; this.style.boxShadow='0 0 0 3px rgba(96, 150, 180, 0.2)'"
      onblur="this.style.borderColor='#93BFCF'; this.style.boxShadow='none'">
    <svg class="absolute left-8 top-1/2 transform -translate-y-1/2 w-6 h-6 pointer-events-none transition-all" style="color: #6096B4;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
  </div>
</div>

<!-- Advanced Filter Toggle -->
<div class="mb-6">
  <button 
    id="advancedFilterBtn" 
    class="flex items-center gap-2 text-white font-semibold px-4 py-2 rounded-lg transition-all hover:scale-105"
    style="background-color: #6096B4;">
    <svg id="filterIcon" class="w-5 h-5 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
    </svg>
    Advanced Filters
  </button>
  
  <!-- Advanced Filter Dropdown -->
  <div id="advancedFilters" class="advanced-filter-dropdown mt-4">
    <div class="bg-white rounded-xl p-6" style="border: 2px solid #BDCDD6; box-shadow: 0 4px 12px rgba(96, 150, 180, 0.15);">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        <!-- Price Range -->
        <div>
          <label class="block font-semibold mb-3" style="color: #6096B4;">üí∞ Price Range</label>
          <div class="flex gap-3">
            <input 
              type="number" 
              id="minPrice" 
              placeholder="Min" 
              class="w-full px-4 py-2 rounded-lg" 
              style="border: 2px solid #93BFCF;">
            <input 
              type="number" 
              id="maxPrice" 
              placeholder="Max" 
              class="w-full px-4 py-2 rounded-lg" 
              style="border: 2px solid #93BFCF;">
          </div>
        </div>
        
        <!-- Rating Filter -->
        <div>
          <label class="block font-semibold mb-3" style="color: #6096B4;">‚≠ê Minimum Rating</label>
          <select id="minRating" class="w-full px-4 py-2 rounded-lg" style="border: 2px solid #93BFCF;">
            <option value="0">Any Rating</option>
            <option value="4">4+ Stars</option>
            <option value="3">3+ Stars</option>
            <option value="2">2+ Stars</option>
          </select>
        </div>
        
        <!-- Sort By -->
        <div>
          <label class="block font-semibold mb-3" style="color: #6096B4;">üîÑ Sort By</label>
          <select id="sortBy" class="w-full px-4 py-2 rounded-lg" style="border: 2px solid #93BFCF;">
            <option value="-id">Newest First</option>
            <option value="price">Price: Low to High</option>
            <option value="-price">Price: High to Low</option>
            <option value="-views">Most Popular</option>
            <option value="-rating">Highest Rated</option>
          </select>
        </div>
        
      </div>
      
      <!-- Apply Button -->
      <div class="mt-6 flex gap-3">
        <button 
          onclick="applyAdvancedFilters()" 
          class="flex-1 text-white font-bold py-3 rounded-xl hover:scale-105 transition-transform" 
          style="background: linear-gradient(to right, #6096B4, #93BFCF);">
          Apply Filters
        </button>
        <button 
          onclick="resetAdvancedFilters()" 
          class="px-6 py-3 rounded-xl font-bold transition-colors" 
          style="background-color: #EEE9DA; color: #6096B4;">
          Reset
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Results Counter -->
<div class="mb-4 font-semibold" style="color: #6096B4;">
  Showing <span id="resultCount" class="text-xl">0</span> products
</div>

<script>
// Advanced filter toggle
document.getElementById('advancedFilterBtn').addEventListener('click', function() {
  const dropdown = document.getElementById('advancedFilters');
  const icon = document.getElementById('filterIcon');
  
  dropdown.classList.toggle('show');
  icon.style.transform = dropdown.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
});

// Apply advanced filters
function applyAdvancedFilters() {
  const minPrice = document.getElementById('minPrice').value;
  const maxPrice = document.getElementById('maxPrice').value;
  const minRating = document.getElementById('minRating').value;
  const sortBy = document.getElementById('sortBy').value;
  
  // Call your refresh function with these parameters
  refreshProducts();
  showToast('Filters applied successfully!', 'success');
}

// Reset advanced filters
function resetAdvancedFilters() {
  document.getElementById('minPrice').value = '';
  document.getElementById('maxPrice').value = '';
  document.getElementById('minRating').value = '0';
  document.getElementById('sortBy').value = '-id';
  
  refreshProducts();
  showToast('Filters reset!', 'info');
}

// Live search functionality
let searchTimeout;
document.getElementById('liveSearch').addEventListener('input', function(e) {
  clearTimeout(searchTimeout);
  searchTimeout = setTimeout(() => {
    const searchTerm = e.target.value.toLowerCase();
    filterProducts(searchTerm);
  }, 300); // Debounce 300ms
});

function filterProducts(searchTerm) {
  const products = document.querySelectorAll('.stagger-item');
  let visibleCount = 0;
  
  products.forEach(product => {
    const text = product.textContent.toLowerCase();
    if (text.includes(searchTerm)) {
      product.style.display = 'block';
      product.style.animation = 'fadeIn 0.5s ease-out';
      visibleCount++;
    } else {
      product.style.display = 'none';
    }
  });
  
  document.getElementById('resultCount').textContent = visibleCount;
}
</script>